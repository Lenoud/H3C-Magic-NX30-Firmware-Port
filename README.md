# H3C Magic RC3000/RT3000/RW3000刷公版NX30固件
## 一、刷机背景
1. **设备情况**：针对中国电信定制版RC3000、中国联通定制版RT3000、中国移动定制版RW3000路由器，其CPU为IPQ5000，暂无法刷OpenWRT，但可刷公版NX30固件
2. **刷固件优势**：
    - 可使用官方“H3C魔术家APP”
    - 支持无线Mesh组网
    - 提供游戏加速（UU加速免费支持2个设备全区服Steam加速）
    - 无区域限制与宽带限制（公开版特性）


## 二、刷机准备
1. **固件版本要求**：仅003版本固件可直接升级，若为004版本需先降级
2. **所需文件与工具**：
    - 对应运营商原版003版本固件（电信RC3000V100R003.bin、移动/联通对应固件）
    - 005版本NX30固件（分运营商适配版：NX30V100R005-RC3000等）
    - 正版NX30V100R005.bin固件
    - SSH工具

## 三、详细刷机流程
### （一）降级（仅004版本需操作）
1. 进入路由器管理界面，路径：设备管理-基本管理-软件升级
2. 解压对应运营商原版003固件，上传并等待设备自动重启


### （二）更改环境变量（关键步骤）
1. 使用SSH工具登录路由器控制台，命令：`ssh root@192.168.10.1`（账户名root，密码为空）
2. 输入两条环境变量修改命令：
    - `fw_setenv productconfig /etc/config/NX30/product_NX30.ini`
    - `fw_setenv productname=NX30`
3. **重要提醒**：改完后严禁重启，否则可能导致系统无法进入
![alt text](/image/image1.png)

### （三）升级至005版本NX30固件
1. 再次进入管理界面“设备管理-基本管理-软件升级” 选择对应的固件
2. 解压对应运营商的005版本NX30固件，上传并重启设备
3. 重启后变化：路由器重置，管理界面地址变为192.168.124.1
![alt text](/image/image.png)
访问管理页面
![alt text](/image/image2.png)

### （四）刷正版官方固件
1. 用SSH登录新管理地址控制台，命令：`ssh root@192.168.124.1`
2. 修改SN码（避免手动升级限制），命令：`fw_setenv manucode 219801A2W57219K013M4`（SN码后两位可合法修改）
3. 进入“固件升级”界面，解压并上传NX30V100R005.bin，重启完成刷机


## 四、结果验证与注意事项
### （一）功能验证
1. **固件升级**：SN码修改后，系统可检测到可升级固件；但升级至007及以上版本会关闭SSH端口，需保留SSH则不建议升级
2. **游戏加速**：安装“H3C魔术家APP”，同一局域网下通过“+号”添加设备，进入路由器界面可正常使用游戏加速功能


# 引用文章（知乎作者：稀饭科技）：https://zhuanlan.zhihu.com/p/696492075